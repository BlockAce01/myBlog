# Story 2.2: Create an API Endpoint to Get a Single Blog Post

## Status
New

## Story
**As a** frontend developer,
**I want** an API endpoint that can return a single blog post by its ID,
**so that** I can display the full content of a specific post.

## Acceptance Criteria
1.  An API endpoint `/api/posts/:id` is available in the backend application.
2.  When a GET request is made to `/api/posts/:id`, it returns a JSON object for the blog post with the matching ID.
3.  If a post with the specified ID is not found, the API should return a 404 Not Found status.
4.  The post object in the JSON response must contain `id`, `title`, `content`, and `author`.

## Tasks / Subtasks
- [x] Task 1 (AC: 1, 2): Create the `/api/posts/:id` endpoint.
  - [x] Subtask 1.1: In `apps/backend/src/api/posts.js`, add a new route for `/api/posts/:id`.
  - [x] Subtask 1.2: The handler should find the post in the hardcoded list by its ID.
- [x] Task 2 (AC: 3): Implement the not found case.
  - [x] Subtask 2.1: If the post is not found, the handler should return a 404 status code with an error message.
- [x] Task 3 (AC: 4): Ensure the returned post object has the correct structure.
  - [x] Subtask 3.1: The returned JSON object should have `id`, `title`, `content`, and `author`.

## Dev Notes
### Previous Story Insights
- This story builds upon the `/api/posts` endpoint from Story 2.1. It will use the same hardcoded data.

### Data Models
- The data model for a blog post should be consistent with `docs/architecture/4-data-models.md`.

### API Specifications
- The API endpoint should follow the specifications in `docs/architecture/5-api-specification-rest.md`.

### Component Specifications
- Not applicable for a backend story.

### File Locations
- Backend changes will be in `apps/backend/src/api/posts.js`.

### Testing Requirements
- A new test should be added to `apps/backend/src/api/posts.test.js` to verify:
  - The endpoint returns the correct post for a valid ID.
  - The endpoint returns a 404 error for an invalid ID.

### Technical Constraints
- **Backend:** Node.js / Express
[Source: architecture/3-tech-stack.md]

## Change Log
| Date | Version | Description | Author |
|---|---|---|---|
| 2025-08-26 | 1.0 | Initial draft | Gemini |

## Dev Agent Record
### Agent Model Used
Claude 3.5 Sonnet
### Debug Log References
- `apps/backend/src/api/posts.js` updated to include `/api/posts/:id` endpoint.
- `apps/backend/src/api/posts.test.js` updated with new test cases for `/api/posts/:id`.
### Completion Notes List
- Implemented the `/api/posts/:id` endpoint to retrieve a single blog post by ID.
- Handled the 404 Not Found case for invalid post IDs.
- Ensured the returned JSON object contains only `id`, `title`, `content`, and `author`.
- Added comprehensive unit tests for both valid and invalid ID scenarios.
### File List
- `apps/backend/src/api/posts.js` (modified)
- `apps/backend/src/api/posts.test.js` (modified)

## QA Results
### Review Summary
- **Implementation (`apps/backend/src/api/posts.js`):** The endpoint `/api/posts/:id` is correctly implemented, handling both valid and invalid post IDs. The response structure adheres to the acceptance criteria, returning `id`, `title`, `content`, and `author`.
- **Testing (`apps/backend/src/api/posts.test.js`):** Comprehensive unit tests are in place, verifying the correct behavior for valid post IDs and the 404 Not Found scenario for invalid IDs. The tests also correctly assert the structure of the returned post object.

### Acceptance Criteria Verification
1.  **API endpoint `/api/posts/:id` available:** **PASS**. Verified in `apps/backend/src/api/posts.js`.
2.  **Returns JSON object for matching ID:** **PASS**. Verified in `apps/backend/src/api/posts.js` and `apps/backend/src/api/posts.test.js`.
3.  **Returns 404 for not found:** **PASS**. Verified in `apps/backend/src/api/posts.js` and `apps/backend/src/api/posts.test.js`.
4.  **Post object contains `id`, `title`, `content`, `author`:** **PASS**. Verified in `apps/backend/src/api/posts.js` and `apps/backend/src/api/posts.test.js`.

### Overall Quality Gate Decision
**PASS** - The implementation and testing for Story 2.2 meet all defined acceptance criteria and testing requirements.
