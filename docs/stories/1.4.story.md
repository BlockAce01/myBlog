# Story 1.4: Provision Basic Infrastructure with Terraform

## Status
Draft

## Story
**As a** DevOps engineer,
**I want** to define the core AWS infrastructure as code using Terraform,
**so that** the environment is repeatable, version-controlled, and can be created or destroyed on demand.

## Acceptance Criteria
1.  Terraform files are created to define an AWS EC2 instance (e.g., `t2.micro`) and a corresponding security group that allows HTTP and SSH access.
2.  `terraform apply` successfully provisions the resources in the AWS account.
3.  The EC2 instance is running and accessible via SSH.

## Tasks / Subtasks
- [ ] Task 1 (AC: 1): Create Terraform configuration files.
  - [ ] Subtask 1.1: Create a new directory `infrastructure/terraform`.
  - [ ] Subtask 1.2: Create a `main.tf` file to define the AWS provider and resources.
  - [ ] Subtask 1.3: Define an AWS EC2 instance (`aws_instance`) with a `t2.micro` instance type.
  - [ ] Subtask 1.4: Define a security group (`aws_security_group`) that allows inbound traffic on port 22 (SSH) and port 80 (HTTP) from anywhere (`0.0.0.0/0`).
- [ ] Task 2 (AC: 2): Apply the Terraform configuration.
  - [ ] Subtask 2.1: Initialize Terraform in the `infrastructure/terraform` directory using `terraform init`.
  - [ ] Subtask 2.2: Run `terraform apply -auto-approve` to provision the resources.
- [ ] Task 3 (AC: 3): Verify the EC2 instance.
  - [ ] Subtask 3.1: Verify from the AWS console or using AWS CLI that the EC2 instance is in the 'running' state.
  - [ ] Subtask 3.2: Attempt to connect to the instance using SSH (requires a key pair, which should be referenced or created).

## Dev Notes
### Previous Story Insights
- No specific insights from the previous story (containerization) are directly applicable to Terraform provisioning, other than knowing a containerized application will eventually be deployed.

### Data Models
No specific guidance found in architecture docs.

### API Specifications
No specific guidance found in architecture docs.

### Component Specifications
Not applicable for an infrastructure story.

### File Locations
- Terraform files should be created in the `infrastructure/terraform/` directory.
[Source: architecture/7-unified-project-structure-source-tree.md]

### Testing Requirements
- Manual verification of resource creation in AWS is sufficient for this story.
- SSH access to the new instance must be confirmed.

### Technical Constraints
- **IaC:** Terraform
- **Cloud Provider:** AWS
[Source: architecture/3-tech-stack.md]

## Change Log
| Date | Version | Description | Author |
|---|---|---|---|
| 2025-08-26 | 1.0 | Initial draft | Bob (Scrum Master) |

## Dev Agent Record
### Agent Model Used
### Debug Log References
### Completion Notes List
### File List

## QA Results

