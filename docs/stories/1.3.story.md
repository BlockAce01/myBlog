# Story 1.3: Data Models & Database Connection

## Status
Approved

## Story
**As a** developer,
**I want** defined Mongoose schemas and a database connection,
**so that** I can store and retrieve blog data in MongoDB.

## Acceptance Criteria
1. Mongoose schemas created for BlogPost and Comment models
2. Connection established to MongoDB using Mongoose
3. Connection tested locally
4. Models exported for use in API endpoints

## Tasks / Subtasks
- [ ] Task 1: Create BlogPost schema
  - [ ] Define schema matching interface
  - [ ] Add required fields validation
- [ ] Task 2: Create Comment schema
  - [ ] Define schema matching interface
  - [ ] Add required fields validation
- [ ] Task 3: Establish MongoDB connection
  - [ ] Install Mongoose dependency
  - [ ] Create connection utility
  - [ ] Add connection to backend startup
- [ ] Task 4: Test connection
  - [ ] Verify connection on app startup
  - [ ] Add error handling

## Dev Notes
### Data Models
```typescript
// BlogPost
{
  _id: string;
  title: string;
  summary: string;
  content: string; // Markdown
  coverPhotoUrl: string;
  tags: string[];
  publicationDate: Date;
  viewCount: number;
  likeCount: number;
}

// Comment
{
  _id: string;
  postId: string; // Reference to BlogPost
  authorName: string;
  commentText: string;
  createdAt: Date;
}
```
[Source: architecture/4-data-models.md]

### Technical Constraints
- MongoDB connection string: `mongodb://localhost:27017/blogDB`
- Use Mongoose ODM
- Connection should be established at application startup

### File Locations
- Models: `apps/backend/src/models/BlogPost.js`, `apps/backend/src/models/Comment.js`
- Connection utility: `apps/backend/src/db/connection.js`

## Change Log
| Date | Version | Description | Author |
|---|---|---|---|
| 2025-08-29 | 1.0 | Initial draft | Bob (Scrum Master) |
